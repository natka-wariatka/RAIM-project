<!-- Month Calendar View -->
<div class="calendar-container mb-4">
    <div class="card shadow-sm">
        <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
            <h3 class="card-title h5 mb-0">
                <i class="fas fa-calendar me-2"></i><span id="calendar-month-year">June 2025</span> Appointments Calendar
            </h3>
            <div class="btn-group">
                <button type="button" class="btn btn-sm btn-outline-light" id="prev-month">
                    <i class="fas fa-chevron-left"></i>
                </button>
                <button type="button" class="btn btn-sm btn-outline-light" id="current-month">
                    Current
                </button>
                <button type="button" class="btn btn-sm btn-outline-light" id="next-month">
                    <i class="fas fa-chevron-right"></i>
                </button>
            </div>
        </div>
        <div class="card-body" id="calendar-container">
            <!-- Calendar Header with days of week -->
            <div class="row text-center mb-2">
                <div class="col calendar-header">Mon</div>
                <div class="col calendar-header">Tue</div>
                <div class="col calendar-header">Wed</div>
                <div class="col calendar-header">Thu</div>
                <div class="col calendar-header">Fri</div>
                <div class="col calendar-header">Sat</div>
                <div class="col calendar-header">Sun</div>
            </div>

            <!-- Calendar grid will be generated by JavaScript -->
            <div class="calendar-grid" id="calendar-grid">
                <!-- The calendar will be rendered here dynamically -->
            </div>

            <div class="text-muted mt-3 small">
                <span class="badge bg-primary me-2">N</span> Number of available appointments
            </div>
            <div class="text-muted small">
                <span class="text-success me-1">●</span> Days with available appointments
                <span class="text-muted ms-3 me-1">●</span> Weekends and days without appointments
            </div>
        </div>
    </div>
</div>

<!-- Selected Day Appointments Container -->
<div id="day-appointments" class="mb-4" style="display: none;">
    <div class="card shadow-sm">
        <div class="card-header bg-success text-white">
            <h3 class="card-title h5 mb-0">
                <i class="fas fa-calendar-day me-2"></i>Appointments for <span id="selected-date-display"></span>
            </h3>
        </div>
        <div class="card-body">
            <div class="table-responsive">
                <table class="table table-hover" id="day-appointments-table">
                    <thead>
                        <tr>
                            <th>Time</th>
                            <th>Doctor</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody id="day-appointments-body">
                        <!-- Appointments for selected day will be displayed here -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<!-- All Appointments (Initially Hidden) -->
<div id="all-appointments-container" class="mb-4">
    <div class="card shadow-sm">
        <div class="card-header bg-info text-white">
            <h3 class="card-title h5 mb-0">
                <i class="fas fa-list me-2"></i>All Available Appointments
            </h3>
            <button type="button" class="btn-close btn-close-white position-absolute end-0 me-3" aria-label="Close" id="hide-all-appointments"></button>
        </div>
        <div class="card-body">
            <div class="table-responsive">
                <table class="table table-hover appointment-table">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Time</th>
                            <th>Doctor</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for date in sorted_dates %}
                            {% for appointment in appointments_by_date[date] %}
                                <tr class="appointment-row" data-date="{{ date }}">
                                    <td>{{ appointment.formatted_date }}</td>
                                    <td>{{ appointment.formatted_time }}</td>
                                    <td>{{ doctors[appointment.doctor_id].full_name }}</td>
                                    <td>
                                        <button class="btn btn-sm btn-success book-appointment"
                                                data-appointment-id="{{ appointment.id }}"
                                                data-doctor-name="{{ doctors[appointment.doctor_id].full_name }}"
                                                data-date="{{ appointment.formatted_date }}"
                                                data-time="{{ appointment.formatted_time }}">
                                            <i class="fas fa-check-circle me-1"></i>Book
                                        </button>
                                    </td>
                                </tr>
                            {% endfor %}
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<div class="mb-4">
    <button id="show-all-appointments" class="btn btn-outline-primary">
        <i class="fas fa-list-ul me-2"></i>Show All Available Appointments
    </button>
</div>